var t=require("./BigMacIndex.json"),e=require("isomorphic-fetch"),r=function(t){this.ipstack_key=t,this.cache={}};r.prototype.ipstack=function(t){try{var r=this;function n(){return r.cache[c]}var c=t||"check",o=function(){if(!r.cache[c])return Promise.resolve(e("http://api.ipstack.com/"+c+"?access_key="+r.ipstack_key)).then(function(t){return Promise.resolve(t.json()).then(function(t){r.cache[c]=t})})}();return o&&o.then?o.then(n):n()}catch(t){return Promise.reject(t)}},r.prototype._price=function(e,r){var n=e/t["United States"],c=e;return r.country_name in t?c=Math.round(n*t[r.country_name]):"EU"===r.continent_code?c=Math.round(n*t["Euro area"]):"AS"===r.continent_code?c=Math.round(n*t.Vietnam):"AF"===r.continent_code?c=Math.round(n*t.Egypt):"SA"===r.continent_code&&(c=Math.round(n*t.Brazil)),c},r.prototype.price=function(t,e){try{var r=this;return Promise.resolve(r.ipstack(e)).then(function(e){return r._price(t,e)})}catch(t){return Promise.reject(t)}},r.prototype.priceWithLocation=function(t,e){try{var r=this;return Promise.resolve(r.ipstack(e)).then(function(e){return{fairPrice:r._price(t,e),location:e}})}catch(t){return Promise.reject(t)}};export default r;
//# sourceMappingURL=index.mjs.map
