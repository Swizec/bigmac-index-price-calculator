!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.bigmacIndexPriceCalculator=t()}(this,function(){var e=require("./BigMacIndex.json"),t=require("isomorphic-fetch"),n=function(e){this.ipstack_key=e,this.cache={}};return n.prototype.ipstack=function(e){try{var n=this;function r(){return n.cache[c]}var c=e||"check",o=function(){if(!n.cache[c])return Promise.resolve(t("http://api.ipstack.com/"+c+"?access_key="+n.ipstack_key)).then(function(e){return Promise.resolve(e.json()).then(function(e){n.cache[c]=e})})}();return o&&o.then?o.then(r):r()}catch(e){return Promise.reject(e)}},n.prototype._price=function(t,n){var r=t/e["United States"],c=t;return n.country_name in e?c=Math.round(r*e[n.country_name]):"EU"===n.continent_code?c=Math.round(r*e["Euro area"]):"AS"===n.continent_code?c=Math.round(r*e.Vietnam):"AF"===n.continent_code?c=Math.round(r*e.Egypt):"SA"===n.continent_code&&(c=Math.round(r*e.Brazil)),c},n.prototype.price=function(e,t){try{var n=this;return Promise.resolve(n.ipstack(t)).then(function(t){return n._price(e,t)})}catch(e){return Promise.reject(e)}},n.prototype.priceWithLocation=function(e,t){try{var n=this;return Promise.resolve(n.ipstack(t)).then(function(t){return{fairPrice:n._price(e,t),location:t}})}catch(e){return Promise.reject(e)}},n});
//# sourceMappingURL=index.umd.js.map
